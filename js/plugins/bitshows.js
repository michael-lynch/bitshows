/*!
Name: Bitshows
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: February 9, 2015
Last Updated: February 9, 2015
Licensed under the MIT license
*/
!function(t){t.fn.bitshows=function(e){function a(){return t.ajax({type:"GET",url:d,dataType:"jsonp"})}function n(t){var e='<li data-bandsintown-id="'+t.id+'">';return date=new Date(t.datetime),days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],months=["January","February","March","April","May","June","July","August","September","October","November","December"],dayNum=date.getDay(),day=days[dayNum],dayNum+=1,dayNumZero=dayNum.toString().length>1?dayNum:"0"+dayNum.toString(),monthNum=date.getMonth(),month=months[monthNum],monthNumZero=monthNum.toString().length>1?monthNum:"0"+monthNum.toString(),year=date.getFullYear(),dateFormattted="",dateFormattted="dd/mm/yyyy"===i.date_format?dayNumZero+"/"+monthNumZero+"/"+year:"mm/dd/yyyy"===i.date_format?monthNumZero+"/"+dayNumZero+"/"+year:day+" "+month+" "+date.getDate()+", "+year,e+='<span class="event__date">'+dateFormattted+"</span>",e+='<span class="event__venue">'+t.venue.name+"</span>",e+='<span class="event__location">'+t.formatted_location+"</span>",e+='<div class="event__links">',i.tickets&&t.ticket_url&&(e+='<a href="'+t.ticket_url+'" title="Buy Tickets for the show" target="_blank" class="event__tickets">Buy Tickets</a>'),e+='<a href="'+t.facebook_rsvp_url+'" title="RSVP for the show" target="_blank" class="event__rsvp">RSVP</a>',e+="</div>",e+="</li>"}if(!this.length)return this;var r={api_version:"2.0",api_app_id:"plugin",artist:"Skrillex",range:"upcoming",date_format:null,tickets:!0,loader:!0,success:function(){},error:function(){}},o=this;o.settings={},o.settings=t.extend({},r,e);var s=t(this),i=o.settings,d="http://api.bandsintown.com/artists/"+i.artist+"/events.json?api_version="+i.api_version+"&app_id="+i.api_app_id;i.range&&(d+="&date="+i.range),console.log(d),s.each(function(){var e=t(this);i.loader&&e.append('<div class="loader">Loading...</div>'),t.when(a()).done(function(t){if(t.length){e.empty(),console.log(t),t.reverse();for(var a=0;a<t.length;a++){var r=n(t[a]);s.append(r)}i.success.call(this)}else i.error.call(this)}).fail(function(){i.error.call(this)})})}}(jQuery);